import{b as n,d as i}from"./chunk-BBQRPO7P.js";import{N as a,Q as o,V as p,m as s}from"./chunk-HE3ZW6WA.js";var b=class t{constructor(e){this.http=e}apiUrl=`${i.apiGateway}${i.endpoints.tareas}`;tareasSubject=new s([]);tareas$=this.tareasSubject.asObservable();getTareasByObra(e){return this.http.get(`${this.apiUrl}/${e}`).pipe(a(r=>this.emitirActualizacion(r)))}getTareasByProveedor(e){return this.http.get(`${this.apiUrl}/proveedor/${e}`)}createTarea(e){return this.http.post(`${this.apiUrl}/${e.id_obra}`,e).pipe(a(()=>this.refrescarTareas(e.id_obra)))}completarTarea(e,r){return this.http.put(`${this.apiUrl}/${e}/completar`,null).pipe(a(()=>this.refrescarTareas(r)))}updateTarea(e,r){return this.http.put(`${this.apiUrl}/${e}`,r).pipe(a(()=>this.refrescarTareas(r.id_obra)))}deleteTarea(e,r){return this.http.delete(`${this.apiUrl}/${e}`).pipe(a(()=>this.refrescarTareas(r)))}emitirActualizacion(e){this.tareasSubject.next(e)}refrescarTareas(e){this.getTareasByObra(e).subscribe()}static \u0275fac=function(r){return new(r||t)(p(n))};static \u0275prov=o({token:t,factory:t.\u0275fac,providedIn:"root"})};export{b as a};
