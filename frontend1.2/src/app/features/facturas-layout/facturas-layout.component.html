<p-toast position="bottom-right"></p-toast>

<div class="flex justify-between items-center">
  @switch (true) {
    @case (currentRoute === '/facturas') {
      <div class="relative flex justify-between items-center w-full bg-gradient-to-r from-emerald-600 to-emerald-800 p-8 shadow-lg text-white overflow-hidden">
        <div class="absolute inset-0 opacity-10">
          <div class="absolute -right-10 -top-10 w-40 h-40 bg-white rounded-full"></div>
          <div class="absolute -left-10 -bottom-10 w-32 h-32 bg-white rounded-full"></div>
        </div>

        <div class="relative z-10">
          <h1 class="text-3xl font-bold mb-2">Facturas</h1>
          <p class="text-emerald-100">Cuenta corriente de clientes y control de facturacion</p>
        </div>

        <p-button
          label="Nueva Factura"
          icon="pi pi-plus"
          routerLink="/facturas/nueva"
          styleClass="p-button">
        </p-button>
      </div>
    }
    @case (currentRoute === '/facturas/nueva') {
      <div class="relative flex justify-between items-center w-full bg-gradient-to-r from-teal-600 to-teal-800 p-8 shadow-lg text-white overflow-hidden">
        <div class="absolute inset-0 opacity-10">
          <div class="absolute -right-10 -top-10 w-40 h-40 bg-white rounded-full"></div>
          <div class="absolute -left-10 -bottom-10 w-32 h-32 bg-white rounded-full"></div>
        </div>

        <div class="relative z-10">
          <h1 class="text-3xl font-bold mb-2">Nueva Factura</h1>
          <p class="text-teal-100">Registrar una nueva factura para un cliente</p>
        </div>

        <p-button
          label="Volver al listado"
          icon="pi pi-arrow-left"
          (onClick)="goBack()"
          styleClass="p-button">
        </p-button>
      </div>
    }
    @case (currentRoute.includes('/facturas/editar')) {
      <div class="relative flex justify-between items-center w-full bg-gradient-to-r from-sky-600 to-sky-800 p-8 shadow-lg text-white overflow-hidden">
        <div class="absolute inset-0 opacity-10">
          <div class="absolute -right-10 -top-10 w-40 h-40 bg-white rounded-full"></div>
          <div class="absolute -left-10 -bottom-10 w-32 h-32 bg-white rounded-full"></div>
        </div>

        <div class="relative z-10">
          <h1 class="text-3xl font-bold mb-2">Editar Factura</h1>
          <p class="text-sky-100">Actualizar datos y adjuntos de la factura</p>
        </div>
        <p-button
          label="Volver al listado"
          icon="pi pi-arrow-left"
          (onClick)="goBack()"
          styleClass="p-button">
        </p-button>
      </div>
    }
    @case (isDetail()) {
      @if (factura) {
        <div class="relative w-full bg-gradient-to-r from-emerald-600 to-emerald-800 items-center shadow-lg p-8 text-white overflow-hidden">
          <div class="absolute inset-0 opacity-10">
            <div class="absolute -right-10 -top-10 w-40 h-40 bg-white rounded-full"></div>
            <div class="absolute -left-10 -bottom-10 w-32 h-32 bg-white rounded-full"></div>
          </div>

          <div class="relative z-10 flex justify-between items-center flex-wrap gap-4">
            <div class="space-y-2">
              <h1 class="text-3xl font-bold">
                Detalle de Factura
              </h1>
              <div class="flex items-center gap-2 text-emerald-100">
                <i class="pi pi-calendar"></i>
                <p class="text-base">{{ factura.fecha ? (factura.fecha | date:'dd/MM/yyyy') : 'Sin fecha' }}</p>
              </div>
              @if (factura.obra_nombre) {
                <div class="flex items-center gap-2 text-emerald-100">
                  <i class="pi pi-building"></i>
                  <p class="text-base">{{ factura.obra_nombre }}</p>
                </div>
              }
            </div>
            <div class="flex items-center gap-5">
              <p-button
                icon="pi pi-pencil"
                severity="secondary"
                [outlined]="true"
                styleClass="p-button-rounded bg-white/20 hover:bg-white/30 border-white/30 text-white"
                [routerLink]="['/facturas/editar', factura.id]"
                pTooltip="Editar factura"
                tooltipPosition="top">
              </p-button>
              <p-button
                label="Volver al listado"
                icon="pi pi-arrow-left"
                (onClick)="goBack()"
                styleClass="p-button">
              </p-button>
            </div>
          </div>
        </div>
      } @else {
        <div class="relative bg-gradient-to-r from-gray-300 to-gray-400 w-full shadow-lg p-8 animate-pulse">
          <div class="space-y-3">
            <div class="h-8 bg-white/30 rounded w-1/3"></div>
            <div class="h-4 bg-white/30 rounded w-1/4"></div>
          </div>
        </div>
      }
    }
    @default {
      <div>
        <h1 class="text-3xl font-semibold text-gray-800 m-0">Gestion de Facturas</h1>
      </div>
    }
  }
</div>

<div class="p-5 bg-gray-50 min-h-[80vh]">
  <router-outlet></router-outlet>
</div>
