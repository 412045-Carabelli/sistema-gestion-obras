<div class="flex flex-col gap-4">
  <!-- Barra de filtros -->
  <div class="bg-white p-4 rounded-lg border border-gray-200">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
      <div class="md:col-span-8">
        <p-iconfield iconPosition="left" styleClass="w-full">
          <p-inputicon styleClass="pi pi-search"/>
          <input
            (input)="applyFilter()"
            [(ngModel)]="searchValue"
            class="w-full"
            pInputText
            placeholder="Buscar por nombre, dirección o cliente"
            type="text"/>
        </p-iconfield>
      </div>

      <div class="md:col-span-4">
        <p-select
          (onChange)="onActivoChange()"
          [(ngModel)]="activoFiltro"
          [options]="activoOptions"
          optionLabel="label"
          optionValue="value"
          placeholder="Filtrar por estado"
          styleClass="w-full">
          <ng-template let-option pTemplate="selectedItem">
            <div class="flex items-center gap-2">
              <i class="pi pi-filter text-sm"></i>
              <span>{{ option?.label || 'Todos' }}</span>
            </div>
          </ng-template>
        </p-select>
      </div>
    </div>
  </div>

  <!-- Tabla -->
  <p-table
    [tableStyle]="{ 'min-width': '100%' }"
    [value]="clientesFiltrados"
    class="w-full">
    <ng-template pTemplate="header">
      <tr>
        <th class="px-3 py-2 text-left">Nombre</th>
        <th class="px-3 py-2 text-left">Contacto</th>
        <th class="px-3 py-2 text-left">CUIT</th>
        <th class="px-3 py-2 text-left">Teléfono</th>
        <th class="px-3 py-2 text-left">Email</th>
        <th class="px-3 py-2 text-center">Activo</th>
        <th class="px-3 py-2 text-center">Acciones</th>
      </tr>
    </ng-template>

    <ng-template let-c pTemplate="body">
      <tr (click)="onRowClick(c)" class="hover:bg-gray-100 cursor-pointer">
        <td class="px-3 py-2">{{ c.nombre }}</td>
        <td class="px-3 py-2">{{ c.contacto || '—' }}</td>
        <td class="px-3 py-2">{{ c.cuit || '—' }}</td>
        <td class="px-3 py-2">{{ c.telefono || '—' }}</td>
        <td class="px-3 py-2">{{ c.email || '—' }}</td>
        <td class="px-3 py-2 text-center">
          <p-tag
            [severity]="getActivoSeverity(c.activo)"
            [value]="c.activo ? 'Activo' : 'Inactivo'">
          </p-tag>
        </td>
        <td class="px-3 py-2 text-center">
          <p-button
            [icon]="c.activo ? 'pi pi-ban' : 'pi pi-check'"
            [rounded]="true"
            [text]="true"
            [severity]="c.activo ? 'danger' : 'success'"
            (onClick)="toggleActivo(c, $event)">
          </p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
