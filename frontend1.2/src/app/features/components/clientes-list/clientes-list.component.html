@defer (when datosCargados) {
  <div class="flex flex-col gap-4">
    <!-- Barra de filtros -->
    <div class="bg-white p-4 rounded-lg border border-gray-200">
      <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
        <div class="md:col-span-6">
          <p-iconfield iconPosition="left" styleClass="w-full">
            <p-inputicon styleClass="pi pi-search"/>
            <input
              (input)="applyFilter()"
              [(ngModel)]="searchValue"
              class="w-full p-inputtext-sm h-12"
              pInputText
              placeholder="Buscar por nombre, direccion o cliente"
              type="text"/>
          </p-iconfield>
        </div>

        <div class="md:col-span-3">
          <p-select
            (onChange)="onCondicionIvaChange()"
            [(ngModel)]="condicionIvaFiltro"
            [options]="ivaOptions"
            optionLabel="label"
            optionValue="name"
            placeholder="Condicion IVA"
            styleClass="w-full p-inputtext-sm h-12">
            <ng-template let-option pTemplate="selectedItem">
              <div class="flex items-center gap-2">
                <i class="pi pi-filter text-sm"></i>
                <span>{{ option?.label || 'Todas' }}</span>
              </div>
            </ng-template>
          </p-select>
        </div>

        <div class="md:col-span-3 flex items-center gap-2 h-12">
          <p-checkbox
            [(ngModel)]="mostrarInactivos"
            [binary]="true"
            inputId="clientesMostrarInactivos"
            (ngModelChange)="onMostrarInactivosChange()">
          </p-checkbox>
          <label for="clientesMostrarInactivos" class="text-base text-gray-700">
            Ver inactivos
          </label>
        </div>
      </div>
    </div>

    <!-- Tabla -->
    <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
      <p-table
        [rowHover]="true"
        [tableStyle]="{ 'min-width': '100%' }"
        [value]="clientesFiltrados"
        [paginator]="true"
        [rows]="8"
        responsiveLayout="scroll"
        class="w-full"
        styleClass="p-datatable-sm">
        <ng-template pTemplate="header">
          <tr>
            <th class="px-3 py-2 text-left">Nombre</th>
            <th class="px-3 py-2 text-left">Contacto</th>
            <th class="px-3 py-2 text-left">Direccion</th>
            <th class="px-3 py-2 text-left">DNI/CUIT</th>
            <th class="px-3 py-2 text-left">Telefono</th>
            <th class="px-3 py-2 text-left">Email</th>
            <th class="px-3 py-2 text-left">Condicion IVA</th>
          </tr>
        </ng-template>

        <ng-template let-c pTemplate="body">
          <tr (click)="onRowClick(c)" class="hover:bg-gray-100 cursor-pointer">
            <td class="px-3 py-2">{{ c.nombre }}</td>
            <td class="px-3 py-2">{{ c.contacto || '-' }}</td>
            <td class="px-3 py-2">{{ c.direccion || '-' }}</td>
            <td class="px-3 py-2">{{ c.cuit || '-' }}</td>
            <td class="px-3 py-2">{{ c.telefono || '-' }}</td>
            <td class="px-3 py-2">{{ c.email || '-' }}</td>
            <td class="px-3 py-2">{{ getCondicionIvaLabel(c.condicionIva ?? c.condicion_iva) }}</td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td class="text-center py-10" colspan="9">
              <div class="flex flex-col items-center justify-center gap-2 text-gray-500">
                <i class="pi pi-inbox text-3xl"></i>
                <p class="text-base font-medium">No hay registros para mostrar</p>
                <p class="text-sm">Ajusta los filtros o crea un nuevo registro.</p>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
} @placeholder {
  <div class="flex flex-col gap-4 animate-pulse">
    <div class="bg-white p-4 rounded-lg border border-gray-200">
      <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
        <div class="md:col-span-8 h-10 bg-gray-200 rounded"></div>
        <div class="md:col-span-4 h-10 bg-gray-200 rounded"></div>
      </div>
    </div>
    <div class="bg-white rounded-lg border border-gray-200 p-4">
      <div class="space-y-3">
        <div class="h-5 bg-gray-200 rounded w-full"></div>
        <div class="h-5 bg-gray-200 rounded w-11/12"></div>
        <div class="h-5 bg-gray-200 rounded w-10/12"></div>
        <div class="h-5 bg-gray-200 rounded w-9/12"></div>
        <div class="h-5 bg-gray-200 rounded w-8/12"></div>
      </div>
    </div>
  </div>
}
