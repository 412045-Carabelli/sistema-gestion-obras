@defer (when !loading) {
  <div class="flex flex-col gap-4">
    <div class="bg-white p-4 rounded-lg border border-gray-200">
      <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
        <div class="md:col-span-6">
          <p-iconfield iconPosition="left" styleClass="w-full">
            <p-inputicon styleClass="pi pi-search"/>
            <input
              (input)="applyFilter()"
              [(ngModel)]="searchValue"
              class="w-full p-inputtext-sm h-12"
              pInputText
              placeholder="Buscar por nombre, contacto, email o tipo"
              type="text"/>
          </p-iconfield>
        </div>

        <div class="md:col-span-3">
          <p-select
            (onChange)="onTipoChange()"
            [(ngModel)]="tipoFiltro"
            [options]="tipoOptions"
            optionLabel="label"
            optionValue="name"
            placeholder="Filtrar por tipo"
            styleClass="w-full p-inputtext-sm h-12">
            <ng-template let-option pTemplate="selectedItem">
              <div class="flex items-center gap-2">
                <i class="pi pi-filter text-sm"></i>
                <span>{{ option?.label || 'Todos' }}</span>
              </div>
            </ng-template>
          </p-select>
        </div>
        <div class="md:col-span-3 flex items-center gap-2 h-12">
          <p-checkbox
            [(ngModel)]="mostrarInactivos"
            [binary]="true"
            inputId="proveedoresMostrarInactivos"
            (ngModelChange)="onMostrarInactivosChange()">
          </p-checkbox>
          <label for="proveedoresMostrarInactivos" class="text-base text-gray-700">
            Ver inactivos
          </label>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
      <p-table
        [rowHover]="true"
        [tableStyle]="{ 'min-width': '100%' }"
        [value]="proveedoresFiltrados"
        [paginator]="true"
        [rows]="8"
        responsiveLayout="scroll"
        class="w-full"
        styleClass="p-datatable-sm"
      >
        <ng-template pTemplate="header">
          <tr>
            <th>Nombre</th>
            <th>Tipo</th>
            <th>Contacto</th>
            <th>Telefono</th>
            <th>Email</th>
            <th class="text-right">Saldo</th>
          </tr>
        </ng-template>

        <ng-template let-row pTemplate="body">
          <tr (click)="irAlDetalle(row)"
              class="cursor-pointer hover:bg-gray-200 transition">
            <td>{{ row.nombre }}</td>
            <td>{{ formatearTipo(row.tipo_proveedor) || '-' }}</td>
            <td>{{ row.contacto || '-' }}</td>
            <td class="whitespace-nowrap max-w-[160px] overflow-hidden text-ellipsis">{{ row.telefono || '-' }}</td>
            <td>{{ row.email || '-' }}</td>
            <td class="text-right font-semibold">{{ obtenerSaldoProveedor(row.id) | currency:'ARS':'symbol':'1.0-2' }}</td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td class="text-center py-10" colspan="6">
              <div class="flex flex-col items-center justify-center gap-2 text-gray-500">
                <i class="pi pi-inbox text-3xl"></i>
                <p class="text-base font-medium">No hay registros para mostrar</p>
                <p class="text-sm">Ajusta los filtros o crea un nuevo registro.</p>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
} @placeholder {
  <div class="flex flex-col gap-4">
    <div class="bg-white p-4 rounded-lg border border-gray-200 animate-pulse">
      <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
        <div class="md:col-span-8 h-10 bg-gray-200 rounded"></div>
        <div class="md:col-span-4 h-10 bg-gray-200 rounded"></div>
      </div>
    </div>

    <div class="bg-white rounded-lg border border-gray-200 p-4 animate-pulse">
      <div class="space-y-3">
        <div class="h-4 bg-gray-200 rounded w-full"></div>
        <div class="h-4 bg-gray-200 rounded w-11/12"></div>
        <div class="h-4 bg-gray-200 rounded w-10/12"></div>
        <div class="h-4 bg-gray-200 rounded w-9/12"></div>
        <div class="h-4 bg-gray-200 rounded w-8/12"></div>
      </div>
    </div>
  </div>
}
