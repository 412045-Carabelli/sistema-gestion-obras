<div class="flex flex-col gap-4">
  <!-- =================== FILTROS =================== -->
  <div class="bg-white p-4 rounded-lg border border-gray-200">
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
      <!-- Buscador -->
      <div class="md:col-span-8">
        <p-iconfield iconPosition="left" styleClass="w-full">
          <p-inputicon styleClass="pi pi-search" />
          <input
            pInputText
            type="text"
            [(ngModel)]="searchValue"
            (input)="applyFilter()"
            placeholder="Buscar por nombre, contacto, email o tipo"
            class="w-full" />
        </p-iconfield>
      </div>

      <!-- Filtro tipo de proveedor -->
      <div class="md:col-span-4">
        <p-select
          [(ngModel)]="tipoFiltro"
          [options]="tipoOptions"
          (onChange)="onTipoChange()"
          placeholder="Filtrar por tipo"
          styleClass="w-full">
          <ng-template pTemplate="selectedItem" let-option>
            <div class="flex items-center gap-2">
              <i class="pi pi-filter text-sm"></i>
              <span>{{ option?.label || 'Todos' }}</span>
            </div>
          </ng-template>
        </p-select>
      </div>
    </div>
  </div>

  <!-- =================== TABLA =================== -->
  <p-table
    [value]="proveedoresFiltrados"
    [loading]="loading"
    class="w-full"
    [tableStyle]="{ 'min-width': '100%' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Nombre</th>
        <th>Tipo</th>
        <th>Contacto</th>
        <th>Teléfono</th>
        <th>Email</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-row>
      <tr class="cursor-pointer hover:bg-gray-200 transition"
          (click)="irAlDetalle(row)">
        <td>{{ row.nombre }}</td>
        <td>{{ row.tipo_proveedor?.nombre ?? '—' }}</td>
        <td>{{ row.contacto ?? '—' }}</td>
        <td>{{ row.telefono ?? '—' }}</td>
        <td>{{ row.email ?? '—' }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
