# ============================
# ? CONFIGURACIÓN GENERAL
# ============================
server.port=8080
spring.application.name=api-gateway
spring.main.web-application-type=reactive

# ============================
# ? SPRING CLOUD GATEWAY - RUTAS
# ============================

# --- Obras Service ---
spring.cloud.gateway.routes[0].id=obras
spring.cloud.gateway.routes[0].uri=http://obras-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/obras/**

# --- Clientes Service ---
spring.cloud.gateway.routes[1].id=clientes
spring.cloud.gateway.routes[1].uri=http://clientes-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/clientes/**

# --- Proveedores Service ---
spring.cloud.gateway.routes[2].id=proveedores
spring.cloud.gateway.routes[2].uri=http://proveedores-service:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/proveedores/**

# --- Tipos Proveedor Service ---
spring.cloud.gateway.routes[3].id=tipos-proveedor
spring.cloud.gateway.routes[3].uri=http://proveedores-service:8083
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/tipos-proveedor/**

# --- Documentos Service ---
spring.cloud.gateway.routes[4].id=documentos
spring.cloud.gateway.routes[4].uri=http://documentos-service:8087
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/documentos/**

# --- Transacciones Service ---
spring.cloud.gateway.routes[5].id=transacciones
spring.cloud.gateway.routes[5].uri=http://transacciones-service:8086
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/transacciones/**

# --- Reportes Service ---
spring.cloud.gateway.routes[6].id=reportes
spring.cloud.gateway.routes[6].uri=http://reportes-service:8084
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/reportes/**

# ============================
# ? Microservicios URLs (para BFF Controllers)
# ============================

# ? Obras
services.obras.url=http://obras-service:8081/api/obras
services.obras.costos.url=${services.obras.url}/costos
services.obras.tareas.url=${services.obras.url}/tareas
services.obras.estado_pago.url=${services.obras.url}/estado_pago

# ? Clientes
services.clientes.url=http://clientes-service:8082/api/clientes

# ? Proveedores
services.proveedores.url=http://proveedores-service:8083/api/proveedores
services.proveedores.tipo.url=${services.proveedores.url}/tipo_proveedor

# ? Documentos
services.documentos.url=http://documentos-service:8087/api/documentos
services.documentos.tipo.url=http://documentos-service:8087/api/tipo_documentos

# ? Transacciones
services.transacciones.url=http://transacciones-service:8086/api/transacciones
services.tipo_transacciones.url=http://transacciones-service:8086/api/tipo_transaccion

# ? Reportes
services.reportes.url=http://reportes-service:8084/api/reportes

# ============================
# ? CORS CONFIGURATION
# ============================
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins[0]=http://localhost:4200
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true

# ============================
# ? MAX UPLOAD / MEMORY CONFIG
# ============================
spring.codec.max-in-memory-size=10MB
spring.webflux.multipart.max-in-memory-size=10MB

# ============================
# ? DEBUG
# ============================
debug=true
