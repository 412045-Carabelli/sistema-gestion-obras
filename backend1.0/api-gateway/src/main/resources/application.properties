# ============================
# ? CONFIGURACIÓN GENERAL
# ============================
server.port=8080
spring.application.name=api-gateway
spring.main.web-application-type=reactive

# ============================
# ? SPRING CLOUD GATEWAY - RUTAS
# ============================

# --- Obras Service ---
spring.cloud.gateway.routes[0].id=obras
spring.cloud.gateway.routes[0].uri=https://obras-service.onrender.com
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/obras/**

# --- Clientes Service ---
spring.cloud.gateway.routes[1].id=clientes
spring.cloud.gateway.routes[1].uri=https://clientes-service.onrender.com
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/clientes/**

# --- Proveedores Service ---
spring.cloud.gateway.routes[2].id=proveedores
spring.cloud.gateway.routes[2].uri=https://proveedores-service.onrender.com
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/proveedores/**

# --- Tipos Proveedor Service ---
spring.cloud.gateway.routes[3].id=tipos-proveedor
spring.cloud.gateway.routes[3].uri=https://proveedores-service.onrender.com
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/tipos-proveedor/**

# --- Documentos Service ---
spring.cloud.gateway.routes[4].id=documentos
spring.cloud.gateway.routes[4].uri=https://documentos-service.onrender.com
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/documentos/**

# --- Transacciones Service ---
spring.cloud.gateway.routes[5].id=transacciones
spring.cloud.gateway.routes[5].uri=https://transacciones-service.onrender.com
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/transacciones/**

# --- Reportes Service ---
spring.cloud.gateway.routes[6].id=reportes
spring.cloud.gateway.routes[6].uri=https://reportes-service.onrender.com
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/reportes/**

# ============================
# ? URLs de microservicios para los BFF Controllers
# ============================

# ? Obras
services.obras.url=https://obras-service.onrender.com/api/obras
services.obras.costos.url=${services.obras.url}/costos
services.obras.tareas.url=${services.obras.url}/tareas
services.obras.estado_pago.url=${services.obras.url}/estado_pago
services.obras.estado_obra.url=${services.obras.url}/estados

# ? Clientes
services.clientes.url=https://clientes-service.onrender.com/api/clientes

# ? Proveedores
services.proveedores.url=https://proveedores-service.onrender.com/api/proveedores
services.proveedores.tipo.url=${services.proveedores.url}/tipo_proveedor

# ? Documentos
services.documentos.url=https://documentos-service.onrender.com/api/documentos
services.documentos.tipo.url=https://documentos-service.onrender.com/api/tipo_documentos

# ? Transacciones
services.transacciones.url=https://transacciones-service.onrender.com/api/transacciones
services.tipo_transacciones.url=https://transacciones-service.onrender.com/api/tipo_transaccion

# ? Reportes
services.reportes.url=https://reportes-service.onrender.com/api/reportes

# ============================
# ? CORS CONFIGURATION
# ============================
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins[0]=https://obras-pablo-pezzini.netlify.app/
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins[1]=http://localhost:4200
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true

# ============================
# ?? MAX UPLOAD / MEMORY CONFIG
# ============================
spring.codec.max-in-memory-size=10MB
spring.webflux.multipart.max-in-memory-size=10MB

# ============================
# ? DEBUG
# ============================
debug=true
