# ============================
# ?? CONFIGURACIÓN GENERAL
# ============================
server.port=8080
spring.application.name=api-gateway
spring.main.web-application-type=reactive
spring.profiles.active=dev

# ============================
# ? SPRING CLOUD GATEWAY - RUTAS (LOCALHOST)
# ============================

# --- Obras Service ---
spring.cloud.gateway.routes[0].id=obras
spring.cloud.gateway.routes[0].uri=http://localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/obras/**

# --- Clientes Service ---
spring.cloud.gateway.routes[1].id=clientes
spring.cloud.gateway.routes[1].uri=http://localhost:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/clientes/**

# --- Proveedores Service ---
spring.cloud.gateway.routes[2].id=proveedores
spring.cloud.gateway.routes[2].uri=http://localhost:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/proveedores/**

# --- Tipos Proveedor Service ---
spring.cloud.gateway.routes[3].id=tipos-proveedor
spring.cloud.gateway.routes[3].uri=http://localhost:8083
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/tipos-proveedor/**

# --- Documentos Service ---
spring.cloud.gateway.routes[4].id=documentos
spring.cloud.gateway.routes[4].uri=http://localhost:8087
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/documentos/**

# --- Transacciones Service ---
spring.cloud.gateway.routes[5].id=transacciones
spring.cloud.gateway.routes[5].uri=http://localhost:8086
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/transacciones/**

# --- Reportes Service ---
spring.cloud.gateway.routes[6].id=reportes
spring.cloud.gateway.routes[6].uri=http://localhost:8084
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/reportes/**

# ============================
# ? URLs INTERNAS (para BFF Controllers)
# ============================
services.obras.url=http://localhost:8081/api/obras
services.clientes.url=http://localhost:8082/api/clientes
services.proveedores.url=http://localhost:8083/api/proveedores
services.documentos.url=http://localhost:8087/api/documentos
services.transacciones.url=http://localhost:8086/api/transacciones
services.reportes.url=http://localhost:8084/api/reportes

# ============================
# ? CORS CONFIG
# ============================
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins[0]=http://localhost:4200
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true

# ============================
# ? LIMITE DE MEMORIA / UPLOADS
# ============================
spring.codec.max-in-memory-size=10MB
spring.webflux.multipart.max-in-memory-size=10MB

# ============================
# ? DEBUG
# ============================
debug=true
